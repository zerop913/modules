<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Подсистема Администрирование</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.16/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="container mx-auto">
    <h1 class="text-3xl font-bold mb-4">Подсистема Администрирование</h1>

    <h2 class="text-2xl font-bold mb-4">Создание ролей</h2>
    <ol class="list-decimal space-y-2 ml-6">
        <li>Открыть конфигуратор</li>
        <li>Добавить роли
            <ol class="list-decimal space-y-2 ml-6">
                <li>Запустите конфигуратор и откройте конфигурацию базы данных.</li>
                <li>В разделе "Общие" выберите вкладку "Роли" и добавьте необходимые роли для работы базы данных.</li>
            </ol>
        </li>
        <li>Выбрать права доступа
            <ol class="list-decimal space-y-2 ml-6">
                <li>Выберите необходимые права доступа для каждой роли, определяя их настройки в соответствии с требованиями вашей системы.</li>
            </ol>
        </li>
    </ol>

    <h2 class="text-2xl font-bold mb-4">Создание пользователей</h2>
    <ol class="list-decimal space-y-2 ml-6">
        <li>Открыть раздел администрирования</li>
        <li>Добавить пользователя
            <ol class="list-decimal space-y-2 ml-6">
                <li>В разделе "Администрирование" откройте вкладку "Пользователи".</li>
                <li>Нажмите на кнопку "+" и заполните поля "Имя" и "Пароль" для нового пользователя.</li>
            </ol>
        </li>
        <li>Назначить роли
            <ol class="list-decimal space-y-2 ml-6">
                <li>На вкладке "Прочие" установите галочку рядом с необходимой ролью для данного пользователя.</li>
            </ol>
        </li>
    </ol>

    <h2 class="text-2xl font-bold mb-4">Создание перечисления</h2>
    <ol class="list-decimal space-y-2 ml-6">
        <li>Создать перечисление</li>
        <li>Определить значения
            <ol class="list-decimal space-y-2 ml-6">
                <li>В разделе "Перечисления" создайте новое перечисление.</li>
                <li>Задайте значения перечисления, например, "Администратор" и "СотрудникПВЗ", определяя их в соответствии с ролями в системе.</li>
            </ol>
        </li>
    </ol>

    <h2 class="text-2xl font-bold mb-4">Создание справочника "Пользователи"</h2>
    <ol class="list-decimal space-y-2 ml-6">
        <li>Создать справочник</li>
        <li>Определить реквизиты
            <ol class="list-decimal space-y-2 ml-6">
                <li>В разделе "Справочники" создайте новый справочник с названием "Пользователи".</li>
                <li>В реквизитах справочника определите следующие поля:
                    <ul class="list-decimal space-y-2 ml-6">
                        <li>Логин (Строка 50)</li>
                        <li>Пароль (Строка 50)</li>
                        <li>Роль (Ссылка на перечисление "Роли")</li>
                        <li>Уникальный идентификатор (УникальныйИдентификатор)</li>
                    </ul>
                </li>
            </ol>
        </li>
        <li>Настроить формы
            <ol class="list-decimal space-y-2 ml-6">
                <li>Настройте формы справочника:
                    <ul class="list-decimal space-y-2 ml-6">
                        <li>ФормаЭлемента (с полями: Код, Логин, Пароль, Роль, Уникальный идентификатор)</li>
                        <li>ФормаВыбора</li>
                        <li>ФормаСписка</li>
                    </ul>
                </li>
            </ol>
        </li>
    </ol>
</body>
<body class="container mx-auto">
    <h1 class="text-3xl font-bold mb-4">Пользователи ФормаЭлемента</h1>
    <p class="text-gray-600">Эта форма предназначена для управления пользователями в системе.</p>

    <!-- Описание процедуры ПередЗаписьюНаСервере -->
    <h2 class="text-2xl font-bold mb-4">Процедура ПередЗаписьюНаСервере</h2>
    <p class="text-gray-600">Процедура выполняет проверку и обработку данных перед их записью в базу данных.</p>
    <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code class="text-gray-800 font-mono">
    &НаСервере
    Процедура ПередЗаписьюНаСервере(Отказ, ТекущийОбъект, ПараметрыЗаписи)
    Запрос = Новый Запрос;
    Запрос.Текст = "ВЫБРАТЬ
                  |    Пользователи.Логин КАК Логин,
                  |    Пользователи.УникальныйИдентификатор КАК УникальныйИдентификатор
                  |ИЗ
                  |    Справочник.Пользователи КАК Пользователи
                  |ГДЕ
                  |    Пользователи.Логин = &Логин";     
    
    Запрос.УстановитьПараметр("Логин", Объект.Логин);
    Результат = Запрос.Выполнить().Выбрать();
    Если Результат.Следующий() Тогда    
        Если Результат.Количество() = 0 ИЛИ ТекущийОбъект.УникальныйИдентификатор = Результат.УникальныйИдентификатор Тогда  
            ПользовательСсылка = ПользователиИнформационнойБазы.НайтиПоУникальномуИдентификатору(ТекущийОбъект.УникальныйИдентификатор);
            
            Если ПользовательСсылка = Неопределено Тогда 
                НовыйПользователь = ПользователиИнформационнойБазы.СоздатьПользователя();
                НовыйПользователь.Имя = Объект.Логин;  
                НовыйПользователь.Пароль = Объект.Пароль;
                НовыйПользователь.ПолноеИмя = Объект.Наименование;
                Если Объект.Роль = Перечисления.Роли.Администратор Тогда
                    НовыйПользователь.Роли.Добавить(Метаданные.Роли.Администратор);      
                ИначеЕсли Объект.Роль = Перечисления.Роли.СотрудникПВЗ Тогда
                    НовыйПользователь.Роли.Добавить(Метаданные.Роли.СотрудникПВЗ);
    	        КонецЕсли;
                НовыйПользователь.ПоказыватьВСпискеВыбора = Ложь;
                
                НовыйПользователь.Записать();
                ТекущийОбъект.УникальныйИдентификатор = НовыйПользователь.УникальныйИдентификатор;
            Иначе
                ПользовательСсылка.Пароль = Объект.Пароль; 
                ПользовательСсылка.ПолноеИмя = Объект.Наименование;
                ПользовательСсылка.Роли.Очистить();    
                Если Объект.Роль = Перечисления.Роли.Администратор Тогда
                    ПользовательСсылка.Роли.Добавить(Метаданные.Роли.Администратор);      
                ИначеЕсли Объект.Роль = Перечисления.Роли.СотрудникПВЗ Тогда
                    ПользовательСсылка.Роли.Добавить(Метаданные.Роли.СотрудникПВЗ);
                КонецЕсли;
                ПользовательСсылка.Записать();
            КонецЕсли;
        Иначе
            Сообщ = Новый СообщениеПользователю;
            Сообщ.Текст = "Пользователь с таким логином уже существует!";
            Сообщ.Сообщить();
            Отказ = Истина;
        КонецЕсли
    Иначе
        НовыйПользователь = ПользователиИнформационнойБазы.СоздатьПользователя();
        НовыйПользователь.Имя = Объект.Логин;
        НовыйПользователь.Пароль = Объект.Пароль;
        НовыйПользователь.ПолноеИмя = Объект.Наименование; 
        Если Объект.Роль = Перечисления.Роли.Администратор Тогда
            НовыйПользователь.Роли.Добавить(Метаданные.Роли.Администратор);      
        ИначеЕсли Объект.Роль = Перечисления.Роли.СотрудникПВЗ Тогда
            НовыйПользователь.Роли.Добавить(Метаданные.Роли.СотрудникПВЗ);
        КонецЕсли;
        НовыйПользователь.ПоказыватьВСпискеВыбора = Ложь;
            
        НовыйПользователь.Записать();
        ТекущийОбъект.УникальныйИдентификатор = НовыйПользователь.УникальныйИдентификатор;
    КонецПроцедуры
    </code></pre>

    <p class="text-gray-600">Эта документация поможет вам систематически создать и настроить роли, пользователей, перечисления и справочники в вашей базе данных, обеспечивая удобное и структурированное управление доступом и данными.</p>
</body>
<body class="container mx-auto">
    <h1 class="text-3xl font-bold mb-4">Подсистема "РаботаПВЗ"</h1>
    <p class="text-gray-600">Эта документация содержит информацию о созданных элементах базы данных для работы с ПВЗ.</p>

    <!-- Создание перечислений -->
    <h2 class="text-2xl font-bold mb-4">Создание перечислений</h2>
    <ul class="list-decimal space-y-2 ml-6">
        <li><strong>ИнформацияОДоставке</strong>
            <ul class="list-decimal space-y-2 ml-6">
                <li>Значения: НеВыдан, Выдан, ИзъятСоСклада</li>
            </ul>
        </li>
    </ul>

    <!-- Создание справочников -->
    <h2 class="text-2xl font-bold mb-4">Создание справочников</h2>
    <ul class="list-decimal space-y-2 ml-6">
        <li><strong>Стеллаж</strong>
            <ul class="list-decimal space-y-2 ml-6">
                <li>Реквизиты:
                    <ul class="list-decimal space-y-2 ml-6">
                        <li>НомерСтеллажа (Строка 10)</li>
                        <li>КоличествоМест (Строка 10)</li>
                    </ul>
                </li>
                <li>Формы: ФормаЭлемента (Наименование, НомерСтеллажа, КоличествоМест)</li>
            </ul>
        </li>
    </ul>

    <!-- Создание регистров сведений -->
    <h2 class="text-2xl font-bold mb-4">Создание регистров сведений</h2>
    <ul class="list-decimal space-y-2 ml-6">
        <li><strong>Стеллажи</strong>
            <ul class="list-decimal space-y-2 ml-6">
                <li>Измерения:
                    <ul class="list-decimal space-y-2 ml-6">
                        <li>СправочникСсылка.Стеллаж</li>
                    </ul>
                </li>
                <li>Ресурсы:
                    <ul class="list-decimal space-y-2 ml-6">
                        <li>КоличествоМест (Число 10)</li>
                        <li>СвободныеМеста (Число 10)</li>
                        <li>ЗанятыеМеста (Число 10)</li>
                    </ul>
                </li>
                <li>Формы: ФормаЗаписи</li>
            </ul>
        </li>
    </ul>

    <!-- Создание документов -->
    <h2 class="text-2xl font-bold mb-4">Создание документов</h2>
    <ul class="list-decimal space-y-2 ml-6">
        <li><strong>Склад</strong>
            <ul class="list-decimal space-y-2 ml-6">
                <li>Реквизиты:
                    <ul class="list-decimal space-y-2 ml-6">
                        <li>Стеллаж (СправочникСсылка.Стеллаж)</li>
                        <li>НомерМеста (Число 10)</li>
                    </ul>
                </li>
                <li>Формы: ФормаДокумента</li>
            </ul>
        </li>
        <li><strong>Заказы</strong>
            <ul class="list-decimal space-y-2 ml-6">
                <li>Реквизиты:
                    <ul class="list-decimal space-y-2 ml-6">
                        <li>ИмяКлиента (Строка 10)</li>
                        <li>НомерТелефонаКлиента (Строка 12)</li>
                        <li>ЯчейкаСклада (ДокументСсылка.Склад)</li>
                        <li>ИнформацияОДоставке (ПеречислениеСсылка.ИнформацияОДоставке)</li>
                        <li>СотрудникПриемки (ДокументСсылка.Сотрудники)</li>
                        <li>СотрудникВыдачи (ДокументСсылка.Сотрудники)</li>
                        <li>ДатаПоступленияНаСклад (Дата и время)</li>
                        <li>ДатаВыдачиЗаказа (Дата и время)</li>
                        <li>СрокХранения (Дата)</li>
                        <li>НомерЗаказа (Число 10)</li>
                    </ul>
                </li>
                <li>Формы:
                    <ul class="list-decimal space-y-2 ml-6">
                        <li>ФормаДокумента (Команды: "Документ о получении доставки")</li>
                        <li>ФормаВыбора</li>
                    </ul>
                </li>       
            </ul>
        </li>
        <li><strong>Сотрудники</strong>
            <ul class="list-decimal space-y-2 ml-6">
                <li>Реквизиты:
                    <ul class="list-decimal space-y-2 ml-6">
                        <li>ФИО (Строка)</li>
                        <li>НомерТелефона (Строка 12)</li>
                    </ul>
                </li>
                <li>Формы:
                    <ul class="list-decimal space-y-2 ml-6">
                        <li>ФормаДокумента</li>
                        <li>ФормаВыбора</li>
                    </ul>
                </li>       
            </ul>
        </li>
    </body>
    <body class="container mx-auto">
        <h1 class="text-3xl font-bold mb-4">Документы Заказы</h1>
    
        <!-- Описание процедуры ПередЗаписьюНаСервере -->
        <h2 class="text-2xl font-bold mb-4">ФормаДокумента</h2>
        <p class="text-gray-600">Процедура выполняет проверку и обработку данных перед их записью в базу данных.</p>
        <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code class="text-gray-800 font-mono">
            &НаСервере
            Процедура ДокументОПолученииДоставкиНаСервере()
                // Создаем объект документа Word
                ДокументWord = Новый COMОбъект("Word.Application");
                ДокументWord.Visible = Ложь; // Не показывать приложение Word
                
                // Открываем шаблон документа Word
                Документ = ДокументWord.Documents.Open("D:\\чемпионат\\ЧВТ\\Шаблон1.docx");    // Извлекаем информацию о приеме заказа на склад из документа "Заказы"
                Запрос = Новый Запрос;
                Запрос.Текст = "ВЫБРАТЬ
                |	Заказы.НомерЗаказа КАК НомерЗаказа,
                |	Заказы.ЯчейкаСклада КАК ЯчейкаСклада,
                |	Заказы.СрокХранения КАК СрокХранения,
                |	Заказы.ДатаПоступленияНаСклад КАК ДатаПоступленияНаСклад,
                |	Заказы.СотрудникВыдавшийЗаказ КАК СотрудникОсуществившийПриемку
                |ИЗ
                |	Документ.Заказы КАК Заказы
                |ГДЕ
                |	Заказы.ИнформацияОДоставке = Заказы.ИнформацияОДоставке = &Не_выдан";
                
                Запрос.УстановитьПараметр("Не_выдан", Перечисления.ИнформацияОДоставке.НеВыдан);
                
                Выборка = Запрос.Выполнить().Выбрать();
                
                Если Выборка.Следующий() Тогда
                    // Извлекаем необходимые данные из выборки
                    НомерЗаказа = Выборка.НомерЗаказа;
                    ЯчейкаСклада = Выборка.ЯчейкаСклада;
                    СрокХранения = Выборка.СрокХранения;
                    ДатаПоступленияНаСклад = Выборка.ДатаПоступленияНаСклад;
                    СотрудникОсуществившийПриемку = Выборка.СотрудникОсуществившийПриемку;
                    
                    // Заменяем метки в шаблоне на полученные данные
                    Документ.Bookmarks("НомерЗаказа").Range.Text = НомерЗаказа;
                    Документ.Bookmarks("ЯчейкаСклада").Range.Text = ЯчейкаСклада;
                    Документ.Bookmarks("СрокХранения").Range.Text = СрокХранения;
                    Документ.Bookmarks("ДатаПоступленияЗаказа").Range.Text = ДатаПоступленияНаСклад;
                    Документ.Bookmarks("СотрудникОсуществившийПриемку").Range.Text = СотрудникОсуществившийПриемку;
                    
                    // Сохраняем документ Word
                    Документ.SaveAs("D:\\чемпионат\\ЧВТ\\Результат.docx");
                    
                    ДокументWord.Visible = Истина; // Показываем приложение Word
                КонецЕсли;
            КонецПроцедуры
            
            &НаКлиенте
            Процедура ДокументОПолученииДоставки(Команда)
                ДокументОПолученииДоставкиНаСервере();
            КонецПроцедуры           
        </code></pre>
    </body>
    <body class="container mx-auto">
        <h1 class="text-3xl font-bold mb-4">Документы Заказы</h1>
    
        <!-- Описание процедуры ПередЗаписьюНаСервере -->
        <h2 class="text-2xl font-bold mb-4">ФормаСписка</h2>
        <p class="text-gray-600">Процедура выполняет проверку и обработку данных перед их записью в базу данных.</p>
        <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code class="text-gray-800 font-mono">
            &НаКлиенте
            Процедура ИзъятиеЗаказовПоСрокуХранения()
                 ИзъятиеЗаказовПоСрокуХраненияМассово(); 
             КонецПроцедуры 

            &НаСервере
            Процедура ИзъятиеЗаказовПоСрокуХраненияМассово()
                // Определяем запрос для выбора заказов с нарушенным сроком хранения и не выданных
                Запрос = Новый Запрос;
                Запрос.Текст = " ВЫБРАТЬ 
                |    Заказы.НомерЗаказа КАК НомерЗаказа, 
                |    Заказы.ИнформацияОДоставке КАК ИнформацияОДоставке, 
                |    Заказы.СрокХранения КАК СрокХранения 
                |ИЗ
            	|Документ.Заказы КАК Заказы 
                |ГДЕ 
            	|Заказы.СрокХранения < &ТекущаяДата И Заказы.ИнформацияОДоставке = &Не_выдан";
                Запрос.УстановитьПараметр("Не_выдан", Перечисления.ИнформацияОДоставке.НеВыдан);
                Запрос.УстановитьПараметр("ТекущаяДата", ТекущаяДата());

                // Выполняем запрос
                РезультатЗапроса = Запрос.Выполнить().Выбрать();

                // Обрабатываем результат запроса
                Пока РезультатЗапроса.Следующий() Цикл
                    // Получаем номер заказа
                    НомерЗаказа = РезультатЗапроса.НомерЗаказа;

                    // Находим заказ по его номеру
                    Заказ = РезультатЗапроса.НайтиСледующий(НомерЗаказа);

                    Если Заказ <> Неопределено Тогда
                        // Удаляем заказ из документа
                        Если ТипЗнч(Заказ) = Тип("Документ.Заказы") Тогда
                            Заказ.Удалить();
            			КонецЕсли;
            		КонецЕсли;
            	КонецЦикла;
            КонецПроцедуры         
        </code></pre>
    </body>
    <body class="container mx-auto">
        <h1 class="text-3xl font-bold mb-4">Документы Склад</h1>
    
        <!-- Описание процедуры ПередЗаписьюНаСервере -->
        <h2 class="text-2xl font-bold mb-4">ФормаДокумента</h2>
        <p class="text-gray-600">Процедура выполняет проверку и обработку данных перед их записью в базу данных.</p>
        <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code class="text-gray-800 font-mono">
            &НаСервере
            Процедура НомерМестаПриИзмененииНаСервере()
                // Получаем введенное пользователем значение
                НомерМеста = ЭтотОбъект.НомерМеста;
            
                // Проверяем, свободно ли место
                Если НеЗанятоеМесто(НомерМеста) Тогда
                    // Место свободно, оставляем его как есть
                Иначе
                    // Место занято
                    Сообщить("Место уже занято");
                КонецЕсли;
            
                // Проверяем, есть ли еще свободные ячейки на складе
                Если ЕстьСвободныеЯчейки() Тогда
                    // Есть свободные ячейки, продолжаем
                Иначе
                    // Нет свободных ячеек на складе, выводим предупреждение
                    Сообщить("На складе закончились свободные ячейки");
                КонецЕсли;
            КонецПроцедуры
            
            // Функция для проверки, свободно ли место
            Функция НеЗанятоеМесто(НомерМеста) 
                Запрос = Новый Запрос;
                Запрос.Текст = "ВЫБРАТЬ ПЕРВЫЕ 1 Склад.Ссылка ИЗ Документ.Склад КАК Склад ГДЕ Склад.НомерМеста = &НомерМеста";
                Запрос.УстановитьПараметр("НомерМеста", НомерМеста);
                Результат = Запрос.Выполнить();
                Если Результат.Пустой() Тогда
                    // Место свободно
                    Возврат Истина;
                Иначе
                    // Место занято
                    Возврат Ложь;
                КонецЕсли;
            КонецФункции
            
            // Функция для проверки наличия свободных ячеек на складе
            Функция ЕстьСвободныеЯчейки()
                Запрос = Новый Запрос;
                Запрос.Текст = "ВЫБРАТЬ Склад.Ссылка ИЗ Документ.Склад КАК Склад ГДЕ НеЗанятоеМесто(Склад.НомерМеста) = Истина";
                Результат = Запрос.Выполнить();
                Если Результат.Пустой() Тогда
                    // Нет свободных ячеек на складе
                    Возврат Ложь;
                Иначе
                    // Есть свободные ячейки на складе
                    Возврат Истина;
                КонецЕсли;
            КонецФункции
            
            &НаКлиенте
            Процедура НомерМестаПриИзменении(Элемент)
                НомерМестаПриИзмененииНаСервере();
            КонецПроцедуры                    
        </code></pre>
    </body>
    <body class="container mx-auto">
        <h1 class="text-3xl font-bold mb-4">Создание отчета о текущей заполнености склада</h1>
        <h2 class="text-2xl font-bold mb-4">Реквизиты</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>Дата</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Формы</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>ФормаОтчета</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Команда "Сформировать"</h2>
        <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code class="text-gray-800 font-mono">&НаСервере
    Процедура СформироватьНаСервере()
        Макет = Отчеты.Отчет1.ПолучитьМакет("Макет");
        Запрос = Новый Запрос;
        Запрос.Текст = 
            "ВЫБРАТЬ
            |   СУММА(Стеллажи.СвободныеМеста) КАК СвободныеМеста,
            |   СУММА(Стеллажи.ЗанятыеМеста) КАК ЗанятыеМеста,
            |   Стеллажи.Стеллаж КАК Стеллаж,
            |   ПРЕДСТАВЛЕНИЕ(Стеллажи.Стеллаж) КАК СтеллажПредставление,
            |   Стеллажи.КоличествоМест КАК КоличествоМест,
            |   ПРЕДСТАВЛЕНИЕ(Стеллажи.КоличествоМест) КАК КоличествоМестПредставление
            |ИЗ
            |   РегистрСведений.Стеллажи КАК Стеллажи
            |
            |СГРУППИРОВАТЬ ПО
            |   Стеллажи.Стеллаж,
            |   Стеллажи.КоличествоМест";
        Запрос.УстановитьПараметр("Дата", Отчет.Дата);
        
        РезультатЗапроса = Запрос.Выполнить();
        
        ОбластьЗаголовок = Макет.ПолучитьОбласть("Заголовок");
        ОбластьПодвал = Макет.ПолучитьОбласть("Подвал");
        ОбластьШапкаТаблицы = Макет.ПолучитьОбласть("ШапкаТаблицы");
        ОбластьПодвалТаблицы = Макет.ПолучитьОбласть("ПодвалТаблицы");
        ОбластьДетальныхЗаписей = Макет.ПолучитьОбласть("Детали");
        
        ТабДок.Очистить();
        ОбластьЗаголовок.Параметры.Дата = Формат(Отчет.Дата, "ДФ=dd.MM.yyyy");
        ТабДок.Вывести(ОбластьЗаголовок);
        ТабДок.Вывести(ОбластьШапкаТаблицы);
        ТабДок.НачатьАвтогруппировкуСтрок();
        
        ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
        
        Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
            ОбластьДетальныхЗаписей.Параметры.Заполнить(ВыборкаДетальныеЗаписи);
            ТабДок.Вывести(ОбластьДетальныхЗаписей, ВыборкаДетальныеЗаписи.Уровень());
        КонецЦикла;
        
        ТабДок.ЗакончитьАвтогруппировкуСтрок();
        ТабДок.Вывести(ОбластьПодвалТаблицы);
        ТабДок.Вывести(ОбластьПодвал);
        
        //}}КОНСТРУКТОР_ЗАПРОСА_С_ОБРАБОТКОЙ_РЕЗУЛЬТАТА
    
    КонецПроцедуры
    
    &НаКлиенте
    Процедура Сформировать(Команда)
        СформироватьНаСервере();
    КонецПроцедуры</code></pre>
    </body>
    <body class="container mx-auto">
        <h1 class="text-3xl font-bold mb-4">Создание отчета склада по сроку хранения</h1>
        <h2 class="text-2xl font-bold mb-4">Реквизиты</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>Дата</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Формы</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>ФормаОтчета</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Команда "Сформировать"</h2>
        <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code class="text-gray-800 font-mono">&НаСервере
    Процедура СформироватьНаСервере() 
        Макет = Отчеты.Отчет2.ПолучитьМакет("Макет1");
        Запрос = Новый Запрос;
        Запрос.Текст = 
            "ВЫБРАТЬ
            |   Заказы.СрокХранения КАК СрокХранения,
            |   Заказы.ЯчейкаСклада.НомерМеста КАК ЯчейкаСкладаНомерМеста,
            |   Заказы.ЯчейкаСклада.Стеллаж КАК ЯчейкаСкладаНомерСтеллажа,
            |   ПРЕДСТАВЛЕНИЕ(Заказы.ЯчейкаСклада.Стеллаж) КАК ЯчейкаСкладаСтеллажПредставление
            |ИЗ
            |   Документ.Заказы КАК Заказы
            |
            |ГДЕ
            |   Заказы.СрокХранения = &Дата"; // Добавлено условие ГДЕ для фильтрации по дате
        
        Запрос.УстановитьПараметр("Дата", Отчет.Дата); // Установка конкретной даты
        
        РезультатЗапроса = Запрос.Выполнить();
        
        ОбластьЗаголовок = Макет.ПолучитьОбласть("Заголовок");
        ОбластьПодвал = Макет.ПолучитьОбласть("Подвал");
        ОбластьШапкаТаблицы = Макет.ПолучитьОбласть("ШапкаТаблицы");
        ОбластьПодвалТаблицы = Макет.ПолучитьОбласть("ПодвалТаблицы");
        ОбластьДетальныхЗаписей = Макет.ПолучитьОбласть("Детали");
        
        ТабДок.Очистить(); 
        
        ОбластьЗаголовок.Параметры.Дата = Формат(Отчет.Дата, "ДФ=dd.MM.yyyy");
        ТабДок.Вывести(ОбластьЗаголовок);
        ТабДок.Вывести(ОбластьШапкаТаблицы);
        ТабДок.НачатьАвтогруппировкуСтрок();
        
        ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
        
        Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
            ОбластьДетальныхЗаписей.Параметры.Заполнить(ВыборкаДетальныеЗаписи);
            ТабДок.Вывести(ОбластьДетальныхЗаписей, ВыборкаДетальныеЗаписи.Уровень());
        КонецЦикла;
        
        ТабДок.ЗакончитьАвтогруппировкуСтрок();
        ТабДок.Вывести(ОбластьПодвалТаблицы);
        ТабДок.Вывести(ОбластьПодвал);
                                                
    КонецПроцедуры

    &НаКлиенте
    Процедура СформироватьОтчет(Дата)
        СформироватьНаСервере(); // Вызываем процедуру формирования отчета с выбранной датой
    КонецПроцедуры</code></pre>
    </body>
    <body class="container mx-auto">
        <h1 class="text-3xl font-bold mb-4">Создание отчета по номеру телефона пользователя</h1>
        <h2 class="text-2xl font-bold mb-4">Реквизиты</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>Номер телефона (Строка(12))</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Формы</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>ФормаОтчета</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Команда "Сформировать"</h2>
        <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code class="text-gray-800 font-mono">&НаСервере
    Процедура СформироватьНаСервере()
    
        Макет = Отчеты.Отчет3.ПолучитьМакет("Макет1");
        Запрос = Новый Запрос;
        Запрос.Текст = 
            "ВЫБРАТЬ
            |   Заказы.ИмяКлиента КАК ИмяКлиента,
            |   Заказы.НомерТелефонаКлиента КАК НомерТелефонаКлиента,
            |   Заказы.ЯчейкаСклада КАК ЯчейкаСклада,
            |   ПРЕДСТАВЛЕНИЕ(Заказы.ЯчейкаСклада) КАК ЯчейкаСкладаПредставление,
            |   Заказы.ИнформацияОДоставке КАК ИнформацияОДоставке,
            |   Заказы.ДатаПоступленияНаСклад КАК ДатаПоступленияНаСклад,
            |   Заказы.СрокХранения КАК СрокХранения,
            |   Заказы.ДатаВыдачиЗаказа КАК ДатаВыдачиЗаказа
            |ИЗ
            |   Документ.Заказы КАК Заказы
            |ГДЕ
            |   Заказы.НомерТелефонаКлиента = &НомерТелефона";
        
        Запрос.УстановитьПараметр("НомерТелефона", Отчет.НомерТелефона);
        
        РезультатЗапроса = Запрос.Выполнить();
        
        ОбластьЗаголовок = Макет.ПолучитьОбласть("Заголовок");
        ОбластьПодвал = Макет.ПолучитьОбласть("Подвал");
        ОбластьШапкаТаблицы = Макет.ПолучитьОбласть("ШапкаТаблицы");
        ОбластьПодвалТаблицы = Макет.ПолучитьОбласть("ПодвалТаблицы");
        ОбластьОбщийИтог = Макет.ПолучитьОбласть("ОбщиеИтоги");
        ОбластьДетальныхЗаписей = Макет.ПолучитьОбласть("Детали");
        
        ТабДок.Очистить();
        
        ТабДок.Вывести(ОбластьЗаголовок);
        ТабДок.Вывести(ОбластьШапкаТаблицы);
        ТабДок.НачатьАвтогруппировкуСтрок();
        
        ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
        
        Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
            ОбластьДетальныхЗаписей.Параметры.Заполнить(ВыборкаДетальныеЗаписи);
            ТабДок.Вывести(ОбластьДетальныхЗаписей, ВыборкаДетальныеЗаписи.Уровень());
        КонецЦикла;
        
        ТабДок.ЗакончитьАвтогруппировкуСтрок();
        ТабДок.Вывести(ОбластьПодвалТаблицы);
        ТабДок.Вывести(ОбластьПодвал);
            
    КонецПроцедуры
    
    &НаКлиенте
    Процедура Сформировать(Команда)
        СформироватьНаСервере();
    КонецПроцедуры</code></pre>
    </body>
    <body class="container mx-auto">
        <h1 class="text-3xl font-bold mb-4">Создание отчета об операциях за день</h1>
        <h2 class="text-2xl font-bold mb-4">Реквизиты</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>Дата</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Формы</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>ФормаОтчета</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Команда "Сформировать"</h2>
        <h3>На сервере</h3>
        <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code class="text-gray-800 font-mono">&НаСервере
    Процедура СформироватьНаСервере()
        Макет = Отчеты.Отчет4.ПолучитьМакет("Макет");
        Запрос = Новый Запрос;
        Запрос.Текст = 
            "ВЫБРАТЬ
            |   Заказы.НомерЗаказа КАК Номер,
            |   Заказы.ДатаПоступленияНаСклад КАК ДатаПоступленияНаСклад,
            |   Заказы.ДатаВыдачиЗаказа КАК ДатаВыдачиЗаказа,
            |   Заказы.ИнформацияОДоставке КАК ИнформацияОДоставке
            |ИЗ
            |   Документ.Заказы КАК Заказы
            |ГДЕ
            |   Заказы.ДатаПоступленияНаСклад = &Дата
            |ИЛИ
            |   Заказы.ДатаВыдачиЗаказа = &Дата";
        
        Запрос.УстановитьПараметр("Дата", Отчет.Дата);
        РезультатЗапроса = Запрос.Выполнить();
        
        ОбластьЗаголовок = Макет.ПолучитьОбласть("Заголовок");
        ОбластьПодвал = Макет.ПолучитьОбласть("Подвал");
        ОбластьШапкаТаблицы = Макет.ПолучитьОбласть("ШапкаТаблицы");
        ОбластьПодвалТаблицы = Макет.ПолучитьОбласть("ПодвалТаблицы");
        ОбластьДетальныхЗаписей = Макет.ПолучитьОбласть("Детали");
        
        ТабДок.Очистить();
        ТабДок.Вывести(ОбластьЗаголовок);
        ТабДок.Вывести(ОбластьШапкаТаблицы);
        ТабДок.НачатьАвтогруппировкуСтрок();
        
        ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
        
        Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
            ОбластьДетальныхЗаписей.Параметры.Заполнить(ВыборкаДетальныеЗаписи);
            ТабДок.Вывести(ОбластьДетальныхЗаписей, ВыборкаДетальныеЗаписи.Уровень());
        КонецЦикла;
        
        ТабДок.ЗакончитьАвтогруппировкуСтрок();
        ТабДок.Вывести(ОбластьПодвалТаблицы);
        ТабДок.Вывести(ОбластьПодвал);
    КонецПроцедуры
    
    &НаКлиенте
    Процедура Сформировать(Команда)
        СформироватьНаСервере();
    КонецПроцедуры</code></pre>
    </body>
    <body class="container mx-auto">
        <h1 class="text-3xl font-bold mb-4">Создание отчета об операциях за период</h1>
        <h2 class="text-2xl font-bold mb-4">Реквизиты</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>Дата начала периода</li>
            <li>Дата окончания периода</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Формы</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>ФормаОтчета</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Команда "Сформировать"</h2>
        <h3>На сервере</h3>
        <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code class="text-gray-800 font-mono">&НаСервере
    Процедура СформироватьНаСервере()
        Макет = Отчеты.Отчет5.ПолучитьМакет("Макет");
        Запрос = Новый Запрос;
        Запрос.Текст = 
            "ВЫБРАТЬ
            |   Заказы.НомерЗаказа КАК Номер,
            |   Заказы.ДатаПоступленияНаСклад КАК ДатаПоступленияНаСклад,
            |   Заказы.ДатаВыдачиЗаказа КАК ДатаВыдачиЗаказа,
            |   Заказы.ИнформацияОДоставке КАК ИнформацияОДоставке
            |ИЗ
            |   Документ.Заказы КАК Заказы
            |ГДЕ
            |   Заказы.ДатаПоступленияНаСклад МЕЖДУ &ПериодНачало И &ПериодКонец
            |ИЛИ
            |   Заказы.ДатаВыдачиЗаказа МЕЖДУ &ПериодНачало И &ПериодКонец";
        
        Запрос.УстановитьПараметр("ПериодНачало", Отчет.ДатаНачалаПериода);
        Запрос.УстановитьПараметр("ПериодКонец", Отчет.ДатаОкончанияПериода);
        
        РезультатЗапроса = Запрос.Выполнить();
        
        ОбластьЗаголовок = Макет.ПолучитьОбласть("Заголовок");
        ОбластьПодвал = Макет.ПолучитьОбласть("Подвал");
        ОбластьШапкаТаблицы = Макет.ПолучитьОбласть("ШапкаТаблицы");
        ОбластьПодвалТаблицы = Макет.ПолучитьОбласть("ПодвалТаблицы");
        ОбластьДетальныхЗаписей = Макет.ПолучитьОбласть("Детали");
        
        ТабДок.Очистить();
        ТабДок.Вывести(ОбластьЗаголовок);
        ТабДок.Вывести(ОбластьШапкаТаблицы);
        ТабДок.НачатьАвтогруппировкуСтрок();
        
        ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
        
        Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
            ОбластьДетальныхЗаписей.Параметры.Заполнить(ВыборкаДетальныеЗаписи);
            ТабДок.Вывести(ОбластьДетальныхЗаписей, ВыборкаДетальныеЗаписи.Уровень());
        КонецЦикла;
        
        ТабДок.ЗакончитьАвтогруппировкуСтрок();
        ТабДок.Вывести(ОбластьПодвалТаблицы);
        ТабДок.Вывести(ОбластьПодвал);
    КонецПроцедуры
    
    &НаКлиенте
    Процедура Сформировать(Команда)
        СформироватьНаСервере();
    КонецПроцедуры</code></pre>
    </body>
    <body class="container mx-auto">
        <h1 class="text-3xl font-bold mb-4">Создание отчета о заказах на складе с нарушением срока хранения</h1>
        <h2 class="text-2xl font-bold mb-4">Реквизиты</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>Текущая дата (Дата и время)</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Формы</h2>
        <ul class="list-decimal space-y-2 ml-6">
            <li>ФормаОтчета</li>
        </ul>
        <h2 class="text-2xl font-bold mb-4">Команда "Сформировать"</h2>
        <h3>На сервере</h3>
        <pre class="bg-gray-100 p-4 rounded-lg overflow-x-auto"><code class="text-gray-800 font-mono">&НаСервере
    Процедура СформироватьНаСервере()
        Макет = Отчеты.Отчет6.ПолучитьМакет("Макет");
    
        Запрос = Новый Запрос;
        Запрос.Текст = 
            "ВЫБРАТЬ
            |   Заказы.НомерЗаказа КАК Номер,
            |   Заказы.ИнформацияОДоставке КАК ИнформацияОДоставке,
            |   Заказы.СрокХранения КАК СрокХранения
            |ИЗ
            |   Документ.Заказы КАК Заказы
            |ГДЕ
            |   Заказы.СрокХранения < &ТекущаяДата   
            |И 
            |   Заказы.ИнформацияОДоставке = &Не_выдан"; // фильтруем заказы, у которых срок хранения истек
        
        Запрос.УстановитьПараметр("Не_выдан", Перечисления.ИнформацияОДоставке.НеВыдан);
        Запрос.УстановитьПараметр("ТекущаяДата", Отчет.ТекущаяДата);
        
        РезультатЗапроса = Запрос.Выполнить();
        
        ОбластьЗаголовок = Макет.ПолучитьОбласть("Заголовок");
        ОбластьПодвал = Макет.ПолучитьОбласть("Подвал");
        ОбластьШапкаТаблицы = Макет.ПолучитьОбласть("ШапкаТаблицы");
        ОбластьПодвалТаблицы = Макет.ПолучитьОбласть("ПодвалТаблицы");
        ОбластьДетальныхЗаписей = Макет.ПолучитьОбласть("Детали");
        
        ТабДок.Очистить();
        ТабДок.Вывести(ОбластьЗаголовок);
        ТабДок.Вывести(ОбластьШапкаТаблицы);
        ТабДок.НачатьАвтогруппировкуСтрок();
        
        ВыборкаДетальныеЗаписи = РезультатЗапроса.Выбрать();
        
        Пока ВыборкаДетальныеЗаписи.Следующий() Цикл
            ОбластьДетальныхЗаписей.Параметры.Заполнить(ВыборкаДетальныеЗаписи);
            ТабДок.Вывести(ОбластьДетальныхЗаписей, ВыборкаДетальныеЗаписи.Уровень());
        КонецЦикла;
        
        ТабДок.ЗакончитьАвтогруппировкуСтрок();
        ТабДок.Вывести(ОбластьПодвалТаблицы);
        ТабДок.Вывести(ОбластьПодвал);
    КонецПроцедуры
    
    &НаКлиенте
    Процедура Сформировать(Команда)
        СформироватьНаСервере();
    КонецПроцедуры</code></pre>
    </body>
</html>
